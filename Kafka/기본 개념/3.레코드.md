- **레코드**
    
    레코드는 타임스탬프, 메세지 키, 메세지 값, 오프셋, 헤더로 구성되어 있다. **프로듀서가 생성**한 레코드가 **브로커로 전송**되면 오프셋과 타임스탬프가 지정되어 저장된다. 
    
    **브로커에 한번 적재된 레코드는 수정할 수 없고** **로그 리텐션 기간 또는 용량에 따라서만 삭제된다.**
    
    ![img](https://github.com/seonwoojh/img-source/blob/main/img/%ED%94%84%EB%A1%9C%EB%93%80%EC%84%9C%20%EB%A0%88%EC%BD%94%EB%93%9C.png?raw=true)
    
    - **메세지 키**
        
        메세지 키는 메세지 값을 순서대로 처리하거나 메세지 값의 종류를 나타내기 위해 사용한다.메세지 키를 사용하면 프로듀서가 토픽에 레코드를 전송할 때 메세지 키의 해시값을 토대로 파티션을 지정한다
        
        즉, 동일한 메세지 키라면 동일한 파티션에 들어감. 다만 어느 파티션에 지정될지 알 수 없고 파티션 개수가 변경되면 메세지 키와 파티션 매칭이 달라지므로 주의해야함
        
    - **메세지 값**
        
        실질적으로 처리할 데이터가 들어가 있다. 메세지 키와 값은 **직렬화**되어 브로커로 전송되기 때문에 컨슈머가 이용할 때는 직렬화한 형태와 동일한 형태로 **역직렬화**를 수행해야하고 직렬화, 역직렬화 처리 시 **반드시 동일한 형태로 처리**해야함.
        
        ex) 프로듀서 (StringSerializer로 직렬화) → 컨슈머(IntegerSerializer로 역직렬화) : 오류 발생
        
        ref. **직렬화**란? → 자바 또는 외부 시스템에서 사용가능하도록 바이트 형태로 데이터를 변환하는 기술. 직렬화를 사용하면 프로듀서는 자바 기본형과 참조형뿐만 아니라 동영상, 이미지와 같은 바이너리 데이터도 전송가능
        
    - **오프셋**
        
        직접 지정할 수 없고 브로커에 저장될 때 이전에 전송된 레코드의 오프셋 + 1 의 값으로 생성되고 컨슈머가 데이터를 가져갈 때 사용된다.
        
        오프셋을 사용하면 컨슈머 그룹으로 이루어진 카프카 컨슈머들이 파티션의 데이터를 어디까지 가져갔는지 명확히 지정할 수 있다.
